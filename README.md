# js-dom2tree
1
javascript:(function()%7B((w)%3D%3E%7B%0A%20(w.dom2tree%7C%7C(w.dom2tree%3D((w)%3D%3E%7B%0A%09function%20on(a%2Cb%2Cc)%7Ba.removeEventListener(b%2Cc)%3Ba.addEventListener(b%2Cc)%7D%0A%09function%20at(a%2Cb%2Cc)%7Bon(a%2Cb%2Cfunction%20f(x)%7Bc(x)%3Ba.removeEventListener(b%2Cf)%7D)%7D%0A%09function%20ok(a%2Cb)%7Bconst%20d%3Da.document%3Bd.readyState!%3D%3D'complete'%3Fat(a%2C'load'%2Cb)%3Ab(%7Btarget%3Ad%7D)%7D%0A%09function%20polulate(branch%2Cnode%2Cdepth%2Cnum)%7B%0A%09%20const%20m%3Dnode.children%2Cl%3Dm.length%3B%0A%09%20let%20x%3Dfunction(s)%7Breturn%20branch.appendChild(d.createElement(s))%7D%3B%0A%09%20if(l%3C1)%7B%0A%09%09x%3Dx('li')%3B%0A%09%20%7Delse%7B%0A%09%09x%3Dx('ul')%3B%0A%09%09const%20j%3Ddepth%2B1%3B%0A%09%09let%20e%2Ci%3D0%3B%0A%09%09while(i%3Cl)%7B%0A%09%09%20e%3Dm%5Bi%5D%3B%0A%09%09%20polulate(x%2Ce%2Cj%2C%2B%2Bi)%3B%0A%09%09%7D%3B%0A%09%20%7D%3B%0A%09%20x.insertAdjacentText('afterbegin'%2Cdepth%2B'.'%2Bnum%2B'%3A'%2Bnode.tagName)%3B%0A%09%7D%0A%09function%20process(evt)%7B%0A%09%09locked%3Dtrue%3B%0A%0A%09%09const%20d%3Devt.target%2C%20tree%3Dfrag.appendChild(d.createElement('div'))%3B%0A%09%09polulate(tree%2Cd.body%2C0%2C1)%3B%0A%09%09ok(d.defaultView.open()%2Cfunction(evt)%7Bevt.target.body.appendChild(tree)%7D)%3B%0A%09%09locked%3Dfalse%3B%0A%09%7D%0A%09const%20d%3Dw.document%2C%20frag%3Dd.createDocumentFragment()%3B%0A%09let%20locked%3Dfalse%3B%0A%09return%20(w)%3D%3E%7Bif(locked!%3D%3Dtrue)%7Bok(w%2Cprocess)%7D%7D%0A%20%7D)(w)))(w)%3B%0A%7D)(window)%3B%7D)()%3B
